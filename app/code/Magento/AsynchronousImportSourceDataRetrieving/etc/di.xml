<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Magento\AsynchronousImportSourceDataRetrievingApi\Api\Data\SourceInterface"
                type="Magento\AsynchronousImportSourceDataRetrieving\Model\Source" />

    <preference for="Magento\AsynchronousImportSourceDataRetrievingApi\Api\Data\SourceDataInterface"
                type="Magento\AsynchronousImportSourceDataRetrieving\Model\SourceData" />

    <preference for="Magento\AsynchronousImportSourceDataRetrievingApi\Api\RetrieveSourceDataInterface"
                type="Magento\AsynchronousImportSourceDataRetrieving\Model\RetrieveSourceData" />

    <!-- Source data retrieving strategies -->
    <type name="Magento\AsynchronousImportSourceDataRetrieving\Model\RetrieveSourceData">
        <arguments>
            <argument name="retrievingStrategies" xsi:type="array">
                <item name="local_file" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceDataRetrievingStrategy\LocalFile\Proxy</item>
                <item name="base64_encoded_data" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceDataRetrievingStrategy\Base64EncodedData\Proxy</item>
                <item name="remote_http" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceDataRetrievingStrategy\RemoteHttp\Proxy</item>
                <item name="remote_https" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceDataRetrievingStrategy\RemoteHttps\Proxy</item>
            </argument>
        </arguments>
    </type>
    <!-- Source validators -->
    <type name="Magento\AsynchronousImportSourceDataRetrievingApi\Model\SourceValidatorChain">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="source_type" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceValidator\SourceTypeValidator</item>
                <item name="not_empty_source_definition" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceValidator\NotEmptySourceDefinitionValidator</item>
                <item name="source_data_format" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceValidator\SourceDataFormatValidator</item>
                <item name="source_definition_base64" xsi:type="object">Magento\AsynchronousImportSourceDataRetrieving\Model\SourceValidator\Base64Validator</item>
            </argument>
        </arguments>
    </type>
    <!-- Base64 Encoded Data -->
    <type name="Magento\AsynchronousImportSourceDataRetrieving\Model\SourceDataRetrievingStrategy\Base64EncodedData">
        <arguments>
            <argument name="batchSize" xsi:type="number">3</argument>
        </arguments>
    </type>
</config>
